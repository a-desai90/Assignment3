<%- include('../partials/header') %>
<%- include('../partials/main_nav') %>

<main class="container mt-4">
    <div class="row">
    <div class="offset-md-1 col-md-10">
        <h1><%= title %></h1>

        <a href="/assignments/add" class="btn btn-primary mb-3">
        <i class="fas fa-plus-circle"></i> Add Assignment
        </a>

        <% if (!AssignmentList || AssignmentList.length === 0) { %>
        <p>No assignments yet. Click "Add Assignment" to create one.</p>
        <% } else { %>
        <div class="table-responsive">
            <table class="table table-bordered table-striped table-hover"> 
            <tr class="d-flex">
                <th class="col-3">Title</th>
                <th class="col-2 text-center">Course</th>
                <th class="col-2 text-center">Due Date</th>
                <th class="col-2 text-center">Status</th>
                <th class="col-1">Notes</th>
                <th class="col-1 text-center">Edit</th>
                <th class="col-1 text-center">Delete</th>
            </tr>

            <% for (let i = 0; i < AssignmentList.length; i++) { %>
                <tr class="d-flex">
                <td class="col-3"><%= AssignmentList[i].title %></td>
                <td class="col-2 text-center"><%= AssignmentList[i].course %></td>
                <td class="col-2 text-center">
                    <%= AssignmentList[i].dueDate ? AssignmentList[i].dueDate.toLocaleDateString() : '' %>
                </td>
                <td class="col-2 text-center"><%= AssignmentList[i].status %></td>
                <td class="col-1"><%= AssignmentList[i].notes || '-' %></td>
                <td class="col-1 text-center">
                    <a href="/assignments/edit/<%= AssignmentList[i]._id %>" class="btn btn-sm btn-primary">
                    <i class="fas fa-pencil-alt"></i> Edit
                    </a>
                </td>
                    <td class="col-1 text-center">
                    <a href="/assignments/delete/<%= AssignmentList[i]._id %>"
                        class="btn btn-sm btn-danger"
                        onclick="return confirm('Are you sure you want to delete this assignment?');">
                    <i class="fas fa-trash-alt"></i> Delete
                    </a>
                </td>
                </tr>
            <% } %>
            </table>
        </div>
        <% } %>
    </div>
    </div>
</main>

<%- include('../partials/footer') %>
